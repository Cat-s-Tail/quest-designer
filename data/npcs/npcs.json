{
  "npcs": [
    {
      "id": "village_elder",
      "name": "村长",
      "description": "村庄的智慧长者",
      "avatar": "avatars/village_elder",
      
      "entryNodes": ["greeting", "quest_herbs"],
      
      "nodes": [
        {
          "id": "greeting",
          "type": "option",
          "text": "你好，村长",
          "canShow": "true",
          "next": ["elder_greeting"]
        },
        {
          "id": "quest_herbs",
          "type": "option",
          "text": "[任务] 关于草药收集...",
          "canShow": "not mission.isUnlocked('collect_herbs')",
          "next": ["herb_quest_intro"]
        },
        {
          "id": "elder_greeting",
          "type": "dialog",
          "text": "欢迎，年轻人。有什么我能帮助你的吗？",
          "speaker": "村长",
          "next": ["ask_about_village", "goodbye"]
        },
        {
          "id": "ask_about_village",
          "type": "option",
          "text": "这个村庄怎么样？",
          "canShow": "true",
          "next": ["village_info"]
        },
        {
          "id": "goodbye",
          "type": "option",
          "text": "再见",
          "canShow": "true",
          "next": ["exit"]
        },
        {
          "id": "village_info",
          "type": "dialog",
          "text": "我们是一个和平的村庄，但最近山贼越来越猖獗了...",
          "speaker": "村长",
          "next": ["goodbye"]
        },
        {
          "id": "herb_quest_intro",
          "type": "dialog",
          "text": "村里的药师需要草药。你能帮忙收集10株吗？",
          "speaker": "村长",
          "next": ["accept_herb_quest", "decline_herb_quest"]
        },
        {
          "id": "accept_herb_quest",
          "type": "option",
          "text": "好的，我去收集",
          "canShow": "true",
          "next": ["start_herb_quest"]
        },
        {
          "id": "decline_herb_quest",
          "type": "option",
          "text": "我现在没空",
          "canShow": "true",
          "next": ["exit"]
        },
        {
          "id": "start_herb_quest",
          "type": "instruction",
          "code": "mission.unlock('collect_herbs'); mission.start('collect_herbs')",
          "next": ["quest_started"]
        },
        {
          "id": "quest_started",
          "type": "dialog",
          "text": "太好了！草药在森林里很常见。",
          "speaker": "村长",
          "next": ["goodbye"]
        },
        {
          "id": "exit",
          "type": "exit"
        }
      ]
    },
    
    {
      "id": "blacksmith",
      "name": "铁匠汤姆",
      "description": "村庄的老铁匠，擅长打造武器",
      "avatar": "avatars/blacksmith",
      
      "entryNodes": ["greeting", "shop_option"],
      
      "nodes": [
        {
          "id": "greeting",
          "type": "option",
          "text": "你好，铁匠",
          "canShow": "true",
          "next": ["main_greeting"]
        },
        {
          "id": "shop_option",
          "type": "option",
          "text": "我想看看你的商品",
          "canShow": "true",
          "next": ["shop_menu"]
        },
        {
          "id": "main_greeting",
          "type": "dialog",
          "text": "欢迎光临！我这里有各种武器和装备。",
          "speaker": "铁匠汤姆",
          "next": ["shop_option", "goodbye"]
        },
        {
          "id": "shop_menu",
          "type": "dialog",
          "text": "这些是我的得意之作！",
          "speaker": "铁匠汤姆",
          "next": ["buy_sword", "back"]
        },
        {
          "id": "buy_sword",
          "type": "option",
          "text": "购买铁剑 (100金币)",
          "canShow": "var.gold >= 100",
          "next": ["purchase_sword"]
        },
        {
          "id": "back",
          "type": "option",
          "text": "返回",
          "canShow": "true",
          "next": ["main_greeting"]
        },
        {
          "id": "purchase_sword",
          "type": "instruction",
          "code": "var.gold = var.gold - 100; event.emit('ITEM_PURCHASED', {item='iron_sword', cost=100})",
          "next": ["purchase_thanks"]
        },
        {
          "id": "purchase_thanks",
          "type": "dialog",
          "text": "谢谢惠顾！这是上等货！",
          "speaker": "铁匠汤姆",
          "next": ["goodbye"]
        },
        {
          "id": "goodbye",
          "type": "option",
          "text": "再见",
          "canShow": "true",
          "next": ["exit"]
        },
        {
          "id": "exit",
          "type": "exit"
        }
      ]
    }
  ]
}
